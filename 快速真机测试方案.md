# 📱 快速真机测试方案

## 🎯 目标
快速在真实Android设备上测试陌陌AI自动回复功能

## 🚀 方案一：GitHub在线构建（推荐）

### 步骤1：上传项目到GitHub
```bash
# 在GitHub创建新仓库"momo-auto-reply"
# 然后上传项目文件
```

### 步骤2：启用GitHub Actions自动构建
1. 项目根目录创建 `.github/workflows/build.yml`
2. 推送代码后自动构建APK
3. 在Actions页面下载APK

### 步骤3：手机测试
- 下载APK文件到手机
- 安装并开启无障碍服务
- 在陌陌中测试功能

## 🔧 方案二：简化构建脚本

### 创建快速构建脚本
```bash
# create_build.bat
@echo off
echo 正在快速构建APK...

# 检查必要文件
if not exist "app\build.gradle" (
    echo 项目文件不完整
    pause
    exit /b 1
)

# 尝试本地构建
echo 尝试本地构建...
gradle assembleDebug

if errorlevel 1 (
    echo 本地构建失败，使用在线方案
    echo 请访问: https://github.com/yourusername/momo-auto-reply/actions
    echo 或使用在线APK构建网站
    echo.
    echo 在线构建网站推荐:
    echo - https://www.apkonline.net/
    echo - https://buildapk.online/
    echo - http://appinventor.mit.edu/
) else (
    echo ✅ 构建成功！
    echo APK位置: app\build\outputs\apk\debug\app-debug.apk
)

pause
```

## 📱 方案三：在线APK构建网站

### 推荐网站及使用方法：

#### 1. ApkOnline (https://www.apkonline.net/)
```
步骤：
1. 访问网站
2. 上传项目ZIP文件
3. 选择Android版本
4. 点击Build APK
5. 等待完成并下载
```

#### 2. MIT App Inventor (http://appinventor.mit.edu/)
```
步骤：
1. 注册账户
2. 创建新项目
3. 手动构建界面
4. 编译生成APK
```

#### 3. Build APK Online (https://buildapk.online/)
```
步骤：
1. 上传项目文件
2. 选择配置
3. 开始构建
4. 下载结果
```

## 🛠️ 方案四：手动APK创建

### 如果无法在线构建，创建基础测试APK：

#### 1. 使用现有APK模板
```
需要的APK内容：
- AndroidManifest.xml
- 必要的Java类
- 资源文件
- 权限配置
```

#### 2. 创建最小可行版本
```xml
<!-- 最小AndroidManifest.xml -->
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.momoautoreply">

    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />

    <application
        android:allowBackup="true"
        android:icon="@mipmap/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/Theme.AppCompat">
        
        <activity
            android:name=".MainActivity"
            android:exported="true">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        
        <service
            android:name=".MomoAccessibilityService"
            android:permission="android.permission.BIND_ACCESSIBILITY_SERVICE"
            android:exported="true">
            <intent-filter>
                <action android:name="android.accessibilityservice.AccessibilityService" />
            </intent-filter>
            <meta-data
                android:name="android.accessibilityservice"
                android:resource="@xml/accessibility_service_config" />
        </service>
    </application>
</manifest>
```

## 📋 完整测试流程

### 第一阶段：获取APK
```
选择任一方案获取app-debug.apk：
1. 在线构建服务
2. GitHub Actions
3. 第三方构建网站
4. 手动创建
```

### 第二阶段：手机安装
```
1. 传输APK到手机
2. 开启开发者模式
3. 安装APK
4. 授予必要权限
```

### 第三阶段：功能测试
```
1. 启动应用
2. 开启无障碍服务
3. 配置AI功能
4. 在陌陌中测试
```

## 🔍 验证清单

### APK获取 ✅
- [ ] APK文件已生成
- [ ] 文件大小合理（几MB）
- [ ] 签名验证通过

### 手机安装 ✅
- [ ] 安装成功无报错
- [ ] 应用图标出现在桌面
- [ ] 应用可以正常启动

### 权限配置 ✅
- [ ] 网络权限已授予
- [ ] 存储权限已授予
- [ ] 无障碍服务已开启

### 功能测试 ✅
- [ ] 应用界面正常显示
- [ ] 服务状态显示正常
- [ ] AI回复功能可用
- [ ] 陌陌消息监控有效

## ⚡ 快速测试脚本

### 批量测试命令
```bash
# install_and_test.bat
@echo off
echo 开始真机测试...

echo [1/4] 检查APK文件...
if not exist "app\build\outputs\apk\debug\app-debug.apk" (
    echo APK文件不存在，请先构建
    pause
    exit /b 1
)

echo [2/4] 检查设备连接...
adb devices

echo [3/4] 安装APK...
adb install -r app\build\outputs\apk\debug\app-debug.apk

echo [4/4] 启动应用...
adb shell am start -n com.momoautoreply/.MainActivity

echo 测试完成！
echo 请在手机上完成以下步骤：
echo 1. 开启无障碍服务
echo 2. 配置AI功能
echo 3. 测试陌陌消息监控
echo.
pause
```

## 🎯 推荐执行顺序

1. **立即可用**：使用在线构建服务（GitHub Actions推荐）
2. **备选方案**：使用ApkOnline等第三方网站
3. **手动方案**：如果都不可行，使用简化版本

## 💡 成功关键点

1. **APK获取**：确保获得完整功能的APK
2. **权限配置**：无障碍服务是关键
3. **真实测试**：必须在陌陌应用中验证
4. **网络连接**：确保AI功能可以正常工作

---

**建议**：优先使用GitHub Actions，自动化程度高且稳定可靠。